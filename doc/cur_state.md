# 项目功能简介

这是一个基于 Rust 和 Bevy 游戏引擎构建的文本/控制台 RPG 游戏框架。项目采用模块化设计，遵循 Bevy 的实体-组件-系统(ECS)模式，实现了完整的角色属性、装备、物品使用等核心 RPG 功能。

## 核心功能

### 1. **角色系统**
- **Stats 组件**：包含 hp/max_hp, atk/def, lv/exp, rng 等完整属性
- **升级系统**：经验公式 exp_to_next = 10 × lv²，升级时 +2 max_hp, +1 atk, +1 def
- **属性计算**：基础属性 + 装备加成的动态属性系统

### 2. **装备系统**
- **四个装备槽**：head（头部）、body（身体）、weapon（武器）、accessory（饰品）
- **属性加成**：装备自动影响角色属性
- **装备管理**：支持装备、卸下装备，自动处理背包交换

### 3. **物品使用系统**
- **Potion（药水）**：恢复生命值
- **Scroll（卷轴）**：临时增益效果（框架已实现）
- **Key（钥匙）**：门锁交互（框架已实现）

### 4. **事件驱动架构**
- **EquipmentChanged → RecalculateStats**：装备变更自动重新计算属性
- **GainExp → TryLevelUp**：经验获得自动尝试升级
- **TakeDamage → Death**：伤害处理和死亡检测

### 5. **背包系统**
- 管理玩家物品，支持物品堆叠和查看
- 与装备系统无缝集成

### 6. **数据管理**
- 从 RON 格式文件加载游戏数据（物品列表）
- 支持物品类型、属性等完整数据结构

### 7. **命令行界面**
提供完整的游戏交互命令：
   - `help` - 查看帮助
   - `status` - 查看当前状态
   - `stats` - 显示角色属性
   - `items` - 列出所有物品
   - `give <id> <数量>` - 获取物品
   - `inventory` - 查看背包
   - `equip <slot> <index>` - 装备物品（支持所有四个槽位）
   - `unequip <slot>` - 卸下装备
   - `use <index>` - 使用物品
   - `gain_exp <amount>` - 获得经验（调试用）
   - `take_damage <damage>` - 受到伤害（调试用）
   - `heal <amount>` - 恢复生命值（调试用）
   - `exit` - 退出游戏

## 项目架构

项目采用模块化设计，分为以下核心模块：

- **`character`**：角色系统，管理角色属性、升级、事件处理
- **`core`**：核心插件，管理全局状态、事件和资源
- **`data`**：数据管理，负责加载游戏数据
- **`inventory`**：背包系统，物品管理和使用
- **`equipment`**：装备系统，四槽位装备管理
- **`interface`**：用户交互，实现命令行界面

### 技术特点

1. **事件驱动架构**：使用 Bevy 的事件系统实现松耦合的功能模块
2. **属性重新计算系统**：装备变更时自动重新计算角色属性
3. **模块化设计**：每个功能模块独立，便于扩展和维护
4. **完善的错误处理**：提供友好的错误提示和边界条件处理

整个应用遵循 Bevy 的状态流程：从 `Startup` 到 `Loading`（加载数据），再到 `InGame`（游戏主循环）。

## 开发状态

### ✅ 阶段 1 已完成（2025-07-04）
- 完整的角色属性系统
- 四槽位装备系统
- 物品使用系统
- 事件驱动的属性计算
- 完善的命令行界面
- 全功能测试验证通过

这是一个功能完整的文字 RPG 框架，具备了现代 RPG 游戏的核心机制，可以在此基础上添加更多游戏内容和功能。

